<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Army of Teachers | Official Portal</title>
    
    <style>
        /* --- 1. VISUAL THEME --- */
        :root {
            --primary: #2962ff;       /* Brand Blue */
            --bg: #0a0a0a;            /* Deep Black */
            --surface: #141414;       /* Card Black */
            --border: #333333;        /* Borders */
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --gold: #ffab00;          /* Premium/Locked */
            --green: #00c853;         /* Success/Notes */
            --red: #ff1744;           /* Live/Logout */
            --purple: #651fff;        /* Syllabus */
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif; }
        body { background:var(--bg); color:var(--text-main); min-height:100vh; display:flex; flex-direction:column; overflow-x:hidden; }

        /* --- 2. NAVIGATION --- */
        nav { background:rgba(10,10,10,0.98); border-bottom:1px solid var(--border); padding:15px 25px; display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:1000; backdrop-filter:blur(10px); }
        
        .logo-area { display:flex; align-items:center; gap:12px; cursor:pointer; }
        .logo-img { height:45px; width:45px; border-radius:50%; border:2px solid var(--primary); object-fit:cover; background:#fff; }
        .brand { font-weight:800; font-size:1.4rem; text-transform:uppercase; letter-spacing:0.5px; }
        .brand span { color:var(--primary); }

        .nav-right { display:flex; gap:20px; align-items:center; }
        #user-pill { font-size:0.9rem; color:var(--text-muted); border:1px dashed var(--border); padding:5px 15px; border-radius:20px; cursor:default; display:none; }
        .btn-logout { background:transparent; border:1px solid var(--red); color:var(--red); padding:8px 20px; border-radius:6px; cursor:pointer; font-weight:700; display:none; transition:0.3s; }
        .btn-logout:hover { background:var(--red); color:white; }

        .container { max-width:1400px; margin:0 auto; padding:30px 20px; width:100%; }
        .hidden { display:none !important; }
        .fade-in { animation:fade 0.5s ease forwards; }
        @keyframes fade { from{opacity:0;transform:translateY(15px)} to{opacity:1;transform:translateY(0)} }

        /* --- 3. AUTH SCREEN --- */
        .auth-box { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:85vh; }
        .toggle-box { display:flex; background:var(--surface); padding:5px; border-radius:50px; border:1px solid var(--border); margin-bottom:25px; }
        .t-btn { padding:12px 40px; border-radius:40px; border:none; background:transparent; color:var(--text-muted); cursor:pointer; font-weight:600; font-size:1rem; }
        .t-btn.active { background:var(--primary); color:white; }

        .form-card { background:var(--surface); padding:40px; border-radius:16px; width:100%; max-width:480px; border:1px solid var(--border); box-shadow:0 20px 50px rgba(0,0,0,0.5); }
        input, select { width:100%; padding:14px; background:var(--bg); border:1px solid var(--border); color:white; border-radius:8px; margin-bottom:15px; font-size:1rem; }
        input:focus, select:focus { border-color:var(--primary); outline:none; }
        
        .btn-main { width:100%; padding:14px; background:var(--primary); color:white; border:none; border-radius:8px; font-weight:700; cursor:pointer; transition:0.3s; }
        .btn-main:hover { background:#0039cb; }

        /* TEACHER GRID */
        .class-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-bottom:20px; }
        .c-box { background:var(--bg); border:1px solid var(--border); padding:12px; border-radius:8px; text-align:center; cursor:pointer; font-size:0.9rem; }
        .c-box.selected { background:var(--primary); border-color:var(--primary); font-weight:bold; }

        /* --- 4. DASHBOARD --- */
        .header { display:flex; justify-content:space-between; margin-bottom:30px; border-bottom:1px solid var(--border); padding-bottom:20px; }
        .back-btn { background:transparent; border:1px solid var(--border); color:var(--text-muted); padding:8px 20px; border-radius:6px; cursor:pointer; display:flex; align-items:center; gap:5px; }
        .back-btn:hover { border-color:white; color:white; }

        .grid-cards { display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:20px; }
        .card { background:var(--surface); border:1px solid var(--border); padding:30px; border-radius:12px; cursor:pointer; transition:0.2s; }
        .card:hover { border-color:var(--primary); transform:translateY(-5px); }

        /* RESOURCE COLUMNS */
        .cols { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; align-items:start; }
        @media (max-width:1024px){ .cols{grid-template-columns:1fr 1fr;} }
        @media (max-width:768px){ .cols{grid-template-columns:1fr;} }

        .col { background:var(--surface); border:1px solid var(--border); border-radius:12px; overflow:hidden; min-height:400px; display:flex; flex-direction:column; }
        .col-h { padding:20px; font-weight:700; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.5px; }
        .col-b { padding:15px; display:flex; flex-direction:column; gap:10px; flex:1; }

        .item { background:var(--bg); border:1px solid var(--border); padding:12px; border-radius:8px; display:flex; justify-content:space-between; align-items:center; }
        .sm-btn { font-size:0.75rem; padding:5px 10px; border-radius:4px; background:var(--surface); border:1px solid var(--border); color:var(--text-main); cursor:pointer; }
        .sm-btn:hover { background:var(--primary); border-color:var(--primary); }

        /* LOCKED STATE */
        .locked { position:relative; height:100%; min-height:150px; }
        .blur { filter:blur(5px); opacity:0.4; pointer-events:none; }
        .overlay { position:absolute; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10; }

        /* MODAL */
        .modal-bg { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:2000; display:flex; justify-content:center; align-items:center; }
        .modal { background:var(--surface); width:100%; max-width:400px; padding:30px; border-radius:16px; border:1px solid var(--border); text-align:center; }
        .success-icon { font-size: 50px; color: var(--green); margin-bottom: 15px; }
    </style>
</head>
<body>

    <nav>
        <div class="logo-area" onclick="logout()">
            <img src="logo.png" alt="Img" class="logo-img" onerror="this.style.display='none'">
            <div class="brand">Army of <span>Teachers</span></div>
        </div>
        <div class="nav-right hidden" id="nav-panel">
            <div id="user-pill">User</div>
            <button class="btn-logout" id="logout-btn" onclick="logout()">Logout</button>
        </div>
    </nav>

    <div id="view-auth" class="container auth-box fade-in">
        <div class="toggle-box">
            <button class="t-btn active" id="btn-st" onclick="setRole('student')">Student</button>
            <button class="t-btn" id="btn-te" onclick="setRole('teacher')">Teacher</button>
        </div>

        <div class="form-card">
            <h2 id="auth-header" style="text-align:center; margin-bottom:20px;">Student Access</h2>
            
            <form onsubmit="handleAuth(event)">
                <input type="text" id="inp-name" placeholder="Full Name" required>
                <input type="tel" id="inp-phone" placeholder="Phone Number" required>
                <input type="email" id="inp-email" placeholder="Email Address" required>
                <input type="password" id="inp-pass" placeholder="Password" required>

                <div id="student-opt">
                    <select id="sel-class" onchange="checkStream()" required>
                        <option value="" disabled selected>Select Class</option>
                        <option value="6">Class 6</option><option value="7">Class 7</option>
                        <option value="8">Class 8</option><option value="9">Class 9</option>
                        <option value="10">Class 10</option><option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="sel-stream" class="hidden">
                        <option value="" disabled selected>Select Stream</option>
                        <option value="Science">Science</option><option value="Commerce">Commerce</option><option value="Arts">Arts</option>
                    </select>
                </div>

                <div id="teacher-opt" class="hidden">
                    <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:10px;">Select Classes:</p>
                    <div class="class-grid">
                        <div class="c-box" onclick="togC(this,'6')">6</div><div class="c-box" onclick="togC(this,'7')">7</div>
                        <div class="c-box" onclick="togC(this,'8')">8</div><div class="c-box" onclick="togC(this,'9')">9</div>
                        <div class="c-box" onclick="togC(this,'10')">10</div><div class="c-box" onclick="togC(this,'11')">11</div>
                        <div class="c-box" onclick="togC(this,'12')">12</div>
                    </div>
                    <input type="password" id="inp-tid" placeholder="Teacher ID Code">
                </div>

                <button class="btn-main" id="submit-btn">Enter Portal</button>
            </form>

            <div style="text-align:center; margin-top:25px; text-decoration:underline; cursor:pointer; color:var(--text-muted);" onclick="guestMode()">Skip Login (Guest Mode)</div>
        </div>
    </div>

    <div id="view-class" class="container hidden fade-in">
        <div class="header"><h2>Select Class</h2></div>
        <div class="grid-cards" id="list-class"></div>
    </div>

    <div id="view-sub" class="container hidden fade-in">
        <div class="header">
            <div><button class="back-btn" onclick="nav('class')">‚Üê Back</button><h2 style="margin-top:10px;">Subjects</h2></div>
            <select id="stream-sw" class="hidden" onchange="loadSub(currClass, this.value)">
                <option value="Science">Science</option><option value="Commerce">Commerce</option><option value="Arts">Arts</option>
            </select>
        </div>
        <div class="grid-cards" id="list-sub"></div>
    </div>

    <div id="view-res" class="container hidden fade-in">
        <div class="header">
            <div>
                <button class="back-btn" onclick="nav('sub')">‚Üê Back</button>
                <h2 style="margin-top:10px;" id="lbl-sub">Subject</h2>
                <div style="color:var(--text-muted); font-size:0.9rem;">Materials</div>
            </div>
            <button id="btn-add" class="btn-main hidden" style="width:auto; padding:8px 20px;" onclick="document.getElementById('modal').classList.remove('hidden')">+ Upload</button>
        </div>

        <div class="cols">
            <div class="col" style="border-top:4px solid var(--purple);">
                <div class="col-h" style="color:var(--purple);">üìä Syllabus</div>
                <div class="col-b">
                    <div class="item"><div>Official CBSE</div><button class="sm-btn" onclick="window.open('https://cbseacademic.nic.in/curriculum.html', '_blank')">Visit</button></div>
                </div>
            </div>
            <div class="col" style="border-top:4px solid var(--gold);">
                <div class="col-h" style="color:var(--gold);">üìù Papers</div>
                <div class="col-b" id="c-papers"></div>
            </div>
            <div class="col" style="border-top:4px solid var(--green);">
                <div class="col-h" style="color:var(--green);">üìÑ Notes</div>
                <div class="col-b" id="c-notes"></div>
            </div>
            <div class="col" style="border-top:4px solid var(--red);">
                <div class="col-h" style="color:var(--red);">üî¥ Live</div>
                <div class="col-b" id="c-live"></div>
            </div>
        </div>
    </div>

    <div id="success-modal" class="modal-bg hidden">
        <div class="modal-box">
            <div class="success-icon">‚úì</div>
            <h2 style="margin-bottom:10px;">Success!</h2>
            <p style="color:var(--text-muted); margin-bottom:20px;">Welcome to Army of Teachers.</p>
            <button class="btn-main" onclick="enterPortal()">Continue</button>
        </div>
    </div>

    <div id="modal" class="modal-bg hidden">
        <div class="modal" style="text-align:left;">
            <h3 style="margin-bottom:20px;">Add Resource</h3>
            <select id="u-type"><option value="note">PDF Note</option><option value="live">Live Class</option><option value="paper">Sample Paper</option></select>
            <input type="text" id="u-title" placeholder="Title">
            <div style="border:1px dashed var(--border); padding:15px; margin-bottom:15px; text-align:center;">
                <input type="file" id="u-file" style="display:none" onchange="document.getElementById('f-lbl').innerText=this.files[0].name">
                <label for="u-file" id="f-lbl" style="color:var(--primary); cursor:pointer;">Select File</label>
            </div>
            <button class="btn-main" onclick="addItem()">Post</button>
            <button class="guest-link" style="margin-top:10px; width:100%; text-align:center; display:block;" onclick="document.getElementById('modal').classList.add('hidden')">Cancel</button>
        </div>
    </div>

    <script>
        // --- GOOGLE FORM CONFIG ---
        // REPLACE with your Form Response URL
        const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSeFVOAjlK70r5kUKQh5FxsgM8_MvjlHgNJpchFebht7GbusQg/formResponse';
        
        // YOUR FIELD IDs
        const ENTRY_IDS = {
            name:   'entry.1083495738',
            phone:  'entry.234604227',
            email:  'entry.874049705',
            class:  'entry.14809441',
            stream: 'entry.1128693512'
        };

        // --- DATA ---
        const SUBS = {
            "Gen": ["Maths", "Science", "SST", "English", "Hindi"],
            "Science": ["Physics", "Chemistry", "Maths", "Bio", "English"],
            "Commerce": ["Accounts", "Business", "Economics", "Maths", "English"],
            "Arts": ["History", "Pol. Sci", "Geography", "Economics", "English"]
        };

        // --- STATE ---
        let role = 'student';
        let userClasses = [];
        let currClass = '';
        let currStream = 'Gen';
        let tClasses = [];

        // --- AUTH ---
        function setRole(r) {
            role = r;
            document.querySelectorAll('.t-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(r==='student'?'btn-st':'btn-te').classList.add('active');
            document.getElementById('auth-header').innerText = role==='student'?"Student Access":"Teacher Access";
            
            if(role==='student'){
                document.getElementById('student-opt').classList.remove('hidden');
                document.getElementById('teacher-opt').classList.add('hidden');
            } else {
                document.getElementById('student-opt').classList.add('hidden');
                document.getElementById('teacher-opt').classList.remove('hidden');
            }
        }

        function checkStream(){
            const v = document.getElementById('sel-class').value;
            const s = document.getElementById('sel-stream');
            if(v==='11'||v==='12'){ s.classList.remove('hidden'); } else { s.classList.add('hidden'); }
        }

        function togC(el, c){
            if(tClasses.includes(c)){
                tClasses = tClasses.filter(x=>x!==c); el.classList.remove('selected');
            } else {
                tClasses.push(c); el.classList.add('selected');
            }
        }

        function handleAuth(e){
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            btn.innerText = "Processing...";

            // 1. Validation for Teachers
            if(role === 'teacher') {
                if(tClasses.length === 0) { alert("Select classes."); btn.innerText="Enter Portal"; return; }
                if(!document.getElementById('inp-tid').value) { alert("Enter ID."); btn.innerText="Enter Portal"; return; }
            }

            // 2. Prepare Data
            const name = document.getElementById('inp-name').value;
            const phone = document.getElementById('inp-phone').value;
            const email = document.getElementById('inp-email').value;
            
            let classVal = "N/A";
            let streamVal = "N/A";

            if(role === 'student') {
                classVal = document.getElementById('sel-class').value || "9";
                streamVal = document.getElementById('sel-stream').value || "Gen";
            }

            // 3. SEND TO GOOGLE FORMS (If Student)
            if(role === 'student') {
                sendToGoogle(name, phone, email, classVal, streamVal);
            }

            // 4. Show Success (Simulated Delay)
            setTimeout(() => {
                document.getElementById('success-modal').classList.remove('hidden');
                
                // Set User State
                if(role==='student') {
                    userClasses = [classVal];
                } else {
                    userClasses = tClasses;
                }
            }, 1000);
        }

        function sendToGoogle(name, phone, email, cls, strm) {
            // Hidden Iframe technique
            const iframe = document.createElement('iframe');
            iframe.name = "hidden_iframe";
            iframe.style.display = "none";
            document.body.appendChild(iframe);

            const form = document.createElement('form');
            form.action = GOOGLE_FORM_URL;
            form.method = "POST";
            form.target = "hidden_iframe";

            const addInput = (id, val) => {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = id;
                input.value = val;
                form.appendChild(input);
            };

            addInput(ENTRY_IDS.name, name);
            addInput(ENTRY_IDS.phone, phone);
            addInput(ENTRY_IDS.email, email);
            addInput(ENTRY_IDS.class, cls);
            addInput(ENTRY_IDS.stream, strm);

            document.body.appendChild(form);
            form.submit();
            
            setTimeout(() => {
                document.body.removeChild(form);
                document.body.removeChild(iframe);
            }, 2000);
        }

        function enterPortal() {
            document.getElementById('success-modal').classList.add('hidden');
            initUser(document.getElementById('inp-name').value || "User", userClasses);
        }

        function guestMode(){
            role = 'guest';
            initUser("Guest", ['6','7','8','9','10','11','12']);
        }

        function initUser(name, classes){
            document.getElementById('view-auth').classList.add('hidden');
            document.getElementById('nav-panel').classList.remove('hidden');
            document.getElementById('user-pill').innerText = name;
            document.getElementById('user-pill').style.display = 'block';
            document.getElementById('logout-btn').style.display = 'block';
            
            userClasses = classes;
            document.getElementById('logout-btn').innerText = role==='guest'?"Exit Guest Mode":"Logout";

            if(role === 'student'){
                let st = document.getElementById('sel-stream');
                let sVal = (st && !st.classList.contains('hidden')) ? st.value : 'Gen';
                loadSub(userClasses[0], sVal);
            } else {
                loadClasses();
            }
        }

        function logout(){
            window.location.reload();
        }

        // --- NAVIGATION ---
        function loadClasses(){
            document.getElementById('view-class').classList.remove('hidden');
            const list = document.getElementById('list-class');
            list.innerHTML = '';
            userClasses.forEach(c => {
                list.innerHTML += `<div class="card" onclick="preSub('${c}')"><h3>Class ${c}</h3></div>`;
            });
        }

        function preSub(c){
            let s = 'Gen';
            if((c==='11'||c==='12') && role!=='student') s='Science';
            if(role==='student') {
                let st = document.getElementById('sel-stream');
                if(st) s = st.value;
            }
            loadSub(c, s);
        }

        function nav(to){
            document.getElementById('view-class').classList.add('hidden');
            document.getElementById('view-sub').classList.add('hidden');
            document.getElementById('view-res').classList.add('hidden');
            if(to==='class') document.getElementById('view-class').classList.remove('hidden');
            if(to==='sub') document.getElementById('view-sub').classList.remove('hidden');
        }

        function loadSub(c, s){
            currClass = c; currStream = s;
            document.getElementById('view-class').classList.add('hidden');
            document.getElementById('view-auth').classList.add('hidden');
            document.getElementById('view-sub').classList.remove('hidden');
            
            const sw = document.getElementById('stream-sw');
            if((role!=='student') && (c==='11'||c==='12')) sw.classList.remove('hidden');
            else sw.classList.add('hidden');

            const list = document.getElementById('list-sub');
            list.innerHTML = '';
            const data = (c==='11'||c==='12') ? SUBS[s] : SUBS['Gen'];
            
            data.forEach(sub => {
                list.innerHTML += `<div class="card" onclick="loadRes('${sub}')"><h3>${sub}</h3></div>`;
            });
        }

        function loadRes(sub){
            document.getElementById('view-sub').classList.add('hidden');
            document.getElementById('view-res').classList.remove('hidden');
            document.getElementById('lbl-sub').innerText = `${sub} (Class ${currClass})`;
            
            if(role === 'teacher') document.getElementById('btn-add').classList.remove('hidden');
            else document.getElementById('btn-add').classList.add('hidden');

            renderCols();
        }

        function renderCols(){
            const cp = document.getElementById('c-papers');
            const cn = document.getElementById('c-notes');
            const cl = document.getElementById('c-live');
            cp.innerHTML=''; cn.innerHTML=''; cl.innerHTML='';

            for(let i=1; i<=4; i++){
                let lock = (role==='guest' && i>2);
                cp.innerHTML += `<div class="item" style="${lock?'opacity:0.5':''}"><div>Sample Paper ${i}</div><button class="sm-btn">${lock?'üîí':'PDF'}</button></div>`;
            }

            if(role==='guest'){
                cn.innerHTML = lockHTML();
                cl.innerHTML = lockHTML();
            } else {
                cn.innerHTML = `<div class="item"><div>Ch 1 Notes</div><button class="sm-btn">Read</button></div>`;
                cl.innerHTML = `<div class="item"><div>Doubt Session</div><button class="sm-btn">Watch</button></div>`;
            }
        }

        function lockHTML(){
            return `<div class="locked"><div class="blur"><div class="item"><div>Hidden</div></div><div class="item"><div>Hidden</div></div></div><div class="overlay"><div style="font-weight:bold;margin-bottom:10px;">üîí Login Required</div><button class="btn-main" style="width:auto;padding:5px 15px;" onclick="logout()">Login</button></div></div>`;
        }

        // --- UPLOAD LOGIC ---
        function addItem() {
            const type = document.getElementById('u-type').value;
            const title = document.getElementById('u-title').value;
            const fileInput = document.getElementById('u-file');
            
            // GET REAL FILE NAME
            let fileName = "Uploaded";
            if(fileInput.files.length > 0) fileName = "üìé " + fileInput.files[0].name;

            if(!title) return;
            const html = `<div class="item"><div>${title}<br><span style="font-size:0.7rem;color:var(--text-muted)">${fileName}</span></div><button class="sm-btn">View</button></div>`;
            
            if(type === 'note') document.getElementById('c-notes').insertAdjacentHTML('afterbegin', html);
            else if(type === 'live') document.getElementById('c-live').insertAdjacentHTML('afterbegin', html);
            else document.getElementById('c-papers').insertAdjacentHTML('afterbegin', html);
            
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('u-title').value = '';
        }

        // Init
        setRole('student');
    </script>
</body>
</html>
